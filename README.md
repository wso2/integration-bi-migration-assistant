# integration-bi-migration-assistant

## Table of Contents
- [Overview](#overview)
- [Setting Up the Prerequisites](#setting-up-the-prerequisites)
- [Building the Source](#building-the-source)
- [Running the Migration Tool](#running-the-migration-tool)
- [Sending Changes](#sending-changes)
- [Supported Mule Versions](#supported-mule-versions)
- [Supported Mule Components](#supported-mule-components)
- [Supported DataWeave Transformations](#supported-dataweave-transformations)
- [Sample Input and Output](#sample-input-and-output)

## Overview
The integrator-bi-migration-assistant is a comprehensive tool designed to convert Mule XML configuration files into Ballerina code. It facilitates the migration of Mule projects to Ballerina by automating the conversion process. The tool reads Mule XML configuration files and generates equivalent Ballerina code, ensuring a seamless transition with minimal manual effort.

## Setting Up the Prerequisites

1. Download and install Java SE Development Kit (JDK) version 21 (from one of the following locations).
   * [Oracle](https://www.oracle.com/java/technologies/downloads/)
   * [OpenJDK](http://openjdk.java.net/install/index.html)

2. Generate a GitHub access token with read package permissions, then set the following `env` variables:

    ```shell
   export packageUser=<Your GitHub Username>
   export packagePAT=<GitHub Personal Access Token>
   ```

## Building the Source

Execute the commands below to build from source.

1. To build the package:

   ```bash
   ./gradlew clean build
   ```

2. To run the tests:

   ```bash
   ./gradlew clean test
   ```

3. To build without the tests:

   ```bash
   ./gradlew clean build -x test
   ```

## Running the Migration Tool

First, build the project to create the `build/libs/mule-to-ballerina-migration-assistant.jar` file.

To run the migration tool, use the following command:

```sh
java -jar build/libs/mule-to-ballerina-migration-assistant.jar <mule-xml-config-file-or-project-directory>
```

**Parameters:**
- `<mule-xml-config-file-or-project-directory>`: Path to the Mule XML configuration file or the Mule project directory to be converted.

**Output:**
- **Mule XML Config File**: A standalone `.bal` file is generated with the same name as the input file but with a `.bal` extension. This file is located in the same directory as the input file.
- **Mule Project Directory**: A new Ballerina package is created with the same name as the input project directory, appended with a `-ballerina` suffix. This new package is located inside the given project directory path, and a `.bal` file is created for each Mule XML file within the project.

## Sending Changes
Before sending changes, ensure you have Python 3 installed.
Then, run the following command to automatically generate [MULE_COMPONENT_SAMPLES.md](samples/MULE_COMPONENT_SAMPLES.md), [MULE_DATAWEAVE_SAMPLES.md](samples/MULE_DATAWEAVE_SAMPLES.md) and the relevant sections in [README.md](README.md):

```sh
python3 scripts/generate_samples_md.py
```

## Supported Mule Versions
For now, Mule 3.x is supported. Support for Mule 4.x is expected to be added later.

## Supported Mule Components
(This section is AUTO-GENERATED by the test suite)

The migration tool currently supports the following Mule components:

- [Catch Exception Strategy](samples/MULE_COMPONENT_SAMPLES.md#catch-exception-strategy)
- [Choice](samples/MULE_COMPONENT_SAMPLES.md#choice)
- [Choice Exception Strategy](samples/MULE_COMPONENT_SAMPLES.md#choice-exception-strategy)
- [Database](samples/MULE_COMPONENT_SAMPLES.md#database)
- [Flow](samples/MULE_COMPONENT_SAMPLES.md#flow)
- [Http Listener](samples/MULE_COMPONENT_SAMPLES.md#http-listener)
- [Logger](samples/MULE_COMPONENT_SAMPLES.md#logger)
- [Message Enricher](samples/MULE_COMPONENT_SAMPLES.md#message-enricher)
- [Object To Json](samples/MULE_COMPONENT_SAMPLES.md#object-to-json)
- [Object To String](samples/MULE_COMPONENT_SAMPLES.md#object-to-string)
- [Session Variable](samples/MULE_COMPONENT_SAMPLES.md#session-variable)
- [Set Payload](samples/MULE_COMPONENT_SAMPLES.md#set-payload)
- [Sub Flow](samples/MULE_COMPONENT_SAMPLES.md#sub-flow)
- [Transform Message](samples/MULE_COMPONENT_SAMPLES.md#transform-message)
- [Variable](samples/MULE_COMPONENT_SAMPLES.md#variable)

## Supported DataWeave Transformations
(This section is AUTO-GENERATED by the test suite)

The migration tool currently supports the following DataWeave transformations and their corresponding Ballerina implementations:

- [Concat Array Expression](samples/MULE_DATAWEAVE_SAMPLES.md#concat-array-expression)
- [Concat Object Expression](samples/MULE_DATAWEAVE_SAMPLES.md#concat-object-expression)
- [Concat String Expression](samples/MULE_DATAWEAVE_SAMPLES.md#concat-string-expression)
- [Date Type Expression](samples/MULE_DATAWEAVE_SAMPLES.md#date-type-expression)
- [Filter Value Identifier Expression](samples/MULE_DATAWEAVE_SAMPLES.md#filter-value-identifier-expression)
- [Lower Expression](samples/MULE_DATAWEAVE_SAMPLES.md#lower-expression)
- [Map Combination Expression](samples/MULE_DATAWEAVE_SAMPLES.md#map-combination-expression)
- [Map Index Identifier Expression](samples/MULE_DATAWEAVE_SAMPLES.md#map-index-identifier-expression)
- [Map Index Identifier Only Expression](samples/MULE_DATAWEAVE_SAMPLES.md#map-index-identifier-only-expression)
- [Map Value Identifier Expression](samples/MULE_DATAWEAVE_SAMPLES.md#map-value-identifier-expression)
- [Replace With Expression](samples/MULE_DATAWEAVE_SAMPLES.md#replace-with-expression)
- [Single Selector Expression](samples/MULE_DATAWEAVE_SAMPLES.md#single-selector-expression)
- [Sizeof Expression](samples/MULE_DATAWEAVE_SAMPLES.md#sizeof-expression)
- [String Return Expression](samples/MULE_DATAWEAVE_SAMPLES.md#string-return-expression)
- [Upper Expression](samples/MULE_DATAWEAVE_SAMPLES.md#upper-expression)
- [When Otherwise Expression](samples/MULE_DATAWEAVE_SAMPLES.md#when-otherwise-expression)
- [When Otherwise Nested Expression](samples/MULE_DATAWEAVE_SAMPLES.md#when-otherwise-nested-expression)

## Sample Input and Output

For detailed XML input and ballerina output samples, please refer to [MULE_COMPONENT_SAMPLES.md](samples/MULE_COMPONENT_SAMPLES.md) and [MULE_DATAWEAVE_SAMPLES.md](samples/MULE_DATAWEAVE_SAMPLES.md).
