###### This markdown file is AUTO-GENERATED by the test suite. Do not modify manually. ######

# DataWeave to Ballerina Transformations

This section provides examples of DataWeave scripts and their corresponding Ballerina implementations.

## Concat Array Expression

**DataWeave Script (transform_message_with_concat_array.dwl):**
```dataweave
%dw 1.0
%output application/json
---
{
  a: [0, 1, 2] ++ [3, 4, 5]
}

```

**Ballerina Output (transform_message_with_concat_array.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = check _dwMethod0_();
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_() returns json|error {
    any[] _var_0 = [0, 1, 2];
    var _var_1 = [3, 4, 5];
    return {"a": check _var_0.push(..._var_1).ensureType(json)};
}

```

## Concat Object Expression

**DataWeave Script (transform_message_with_concat_object.dwl):**
```dataweave
%dw 1.0
%output application/json
---
concat: {aa: "a"} ++ {cc: "c"}

```

**Ballerina Output (transform_message_with_concat_object.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = check _dwMethod0_();
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_() returns json|error {
    var _var_0 = {"aa": "a"};
    return {"concat": check {_var_0, "cc": "c"}.ensureType(json)};
}

```

## Concat String Expression

**DataWeave Script (transform_message_with_concat_string.dwl):**
```dataweave
%dw 1.0
%output application/json
---
{
  name: "Ballerina " ++ "Conversion"
}

```

**Ballerina Output (transform_message_with_concat_string.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = _dwMethod0_();
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_() returns json {
    return {"name": "Ballerina " + "Conversion"};
}

```

## Date Type Expression

**DataWeave Script (transform_message_with_date_type.dwl):**
```dataweave
%dw 1.0
%output application/json
---
{
    date: |2021-01-01|,
    time: |23:59:56|,
    timeZone: |-08:00|,
    dateTime: |2003-10-01T23:57:59-03:00|,
    localDateTime: |2003-10-01T23:57:59|
}

```

**Ballerina Output (transform_message_with_date_type.bal):**
```ballerina
import ballerina/http;
import ballerina/time;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = check _dwMethod0_();
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_() returns json|error {
    return {"date": check time:civilFromString("2021-01-01").ensureType(json), "time": check time:civilFromString("23:59:56").ensureType(json), "timeZone": check time:civilFromString("-08:00").ensureType(json), "dateTime": check time:civilFromString("2003-10-01T23:57:59-03:00").ensureType(json), "localDateTime": check time:civilFromString("2003-10-01T23:57:59").ensureType(json)};
}

```

## Filter Value Identifier Expression

**DataWeave Script (transform_message_with_filter_value_identifier.dwl):**
```dataweave
%dw 1.0
%output application/json
%input payload application/json
---
[1, 2, 3, 4] filter $ > 2

```

**Ballerina Output (transform_message_with_filter_value_identifier.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = _dwMethod0_(payload);
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_(json payload) returns json {
    var _var_0 = [1, 2, 3, 4];
    return _var_0.filter(element => element > 2);
}

```

## Lower Expression

**DataWeave Script (transform_message_with_lower.dwl):**
```dataweave
%dw 1.0
%output application/json
---
lower "APPLE"

```

**Ballerina Output (transform_message_with_lower.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = _dwMethod0_();
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_() returns json {
    return "APPLE".toLowerAscii();
}

```

## Map Combination Expression

**DataWeave Script (transform_message_with_map_combination.dwl):**
```dataweave
%dw 1.0
%output application/json
---
users: ["john", "peter", "matt"] map  upper $

```

**Ballerina Output (transform_message_with_map_combination.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = _dwMethod0_();
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_() returns json {
    var _var_0 = ["john", "peter", "matt"];
    return {"users": _var_0.'map(element => element.toUpperAscii())};
}

```

## Map Index Identifier Expression

**DataWeave Script (transform_message_with_map_index_identifier.dwl):**
```dataweave
%dw 1.0
%output application/json
%input payload application/json
---
[1, 2, 3, 4] map $ + $$

```

**Ballerina Output (transform_message_with_map_index_identifier.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = _dwMethod0_(payload);
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_(json payload) returns json {
    var _var_0 = [1, 2, 3, 4];
    return _var_0.'map(element => element + _var_0.indexOf(element));
}

```

## Map Index Identifier Only Expression

**DataWeave Script (transform_message_with_map_index_identifier_only.dwl):**
```dataweave
%dw 1.0
%output application/json
%input payload application/json
---
[1, 2, 3, 4] map $$ + 1

```

**Ballerina Output (transform_message_with_map_index_identifier_only.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = _dwMethod0_(payload);
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_(json payload) returns json {
    var _var_0 = [1, 2, 3, 4];
    return _var_0.'map(element => _var_0.indexOf(element) + 1);
}

```

## Map Value Identifier Expression

**DataWeave Script (transform_message_with_map_value_identifier.dwl):**
```dataweave
%dw 1.0
%output application/json
%input payload application/json
---
[1, 2, 3, 4] map $ + 1

```

**Ballerina Output (transform_message_with_map_value_identifier.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = _dwMethod0_(payload);
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_(json payload) returns json {
    var _var_0 = [1, 2, 3, 4];
    return _var_0.'map(element => element + 1);
}

```

## Replace With Expression

**DataWeave Script (transform_message_with_replace_with.dwl):**
```dataweave
%dw 1.0
%output application/json
---
b: "admin123" replace /(\d+)/ with "ID"

```

**Ballerina Output (transform_message_with_replace_with.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = _dwMethod0_();
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_() returns json {
    string:RegExp _pattern_ = re `/(\d+)/`;
    var _var_0 = "admin123";
    return {"b": _pattern_.replace(_var_0, "ID")};
}

```

## Single Selector Expression

**DataWeave Script (transform_message_with_single_selector.dwl):**
```dataweave
%dw 1.0
%output application/json
%input payload application/json
---
{
	hail1: payload.resultSet1
}

```

**Ballerina Output (transform_message_with_single_selector.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = check _dwMethod0_(payload);
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_(json payload) returns json|error {
    return {"hail1": check payload.resultSet1};
}

```

## Sizeof Expression

**DataWeave Script (transform_message_with_sizeof.dwl):**
```dataweave
%dw 1.0
%output application/json
%input payload application/json
---
{
	hail1: sizeOf [1,2,3,4]
}

```

**Ballerina Output (transform_message_with_sizeof.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = _dwMethod0_(payload);
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_(json payload) returns json {
    var _var_0 = [1, 2, 3, 4];
    return {"hail1": _var_0.length()};
}

```

## String Return Expression

**DataWeave Script (transform_message_with_string_return.dwl):**
```dataweave
%dw 1.0
%output text/plain
---
"Hello World"

```

**Ballerina Output (transform_message_with_string_return.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        string _dwOutput_ = _dwMethod0_();
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_() returns string {
    return "Hello World";
}

```

## Upper Expression

**DataWeave Script (transform_message_with_upper.dwl):**
```dataweave
%dw 1.0
%output application/json
---
upper "apple"

```

**Ballerina Output (transform_message_with_upper.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = _dwMethod0_();
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_() returns json {
    return "apple".toUpperAscii();
}

```

## When Otherwise Expression

**DataWeave Script (transform_message_with_when_otherwise.dwl):**
```dataweave
%dw 1.0
%output application/json
%input payload application/json
---
{
  currency: "USD"
} when payload.country == "USA"
otherwise
{
      currency: "EUR"
}

```

**Ballerina Output (transform_message_with_when_otherwise.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = check _dwMethod0_(payload);
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_(json payload) returns json|error {
    json _var_0;
    if check payload.country == "USA" {
        _var_0 = {"currency": "USD"};
    } else {
        _var_0 = {"currency": "EUR"};
    }
    return _var_0;
}

```

## When Otherwise Nested Expression

**DataWeave Script (transform_message_with_when_otherwise_nested.dwl):**
```dataweave
%dw 1.0
%output application/json
%input payload application/json
---
{
	currency: "USD"
} when payload.country =="USA"
otherwise
{
	currency: "GBP"
} when payload.country =="UK"
otherwise
{
	currency: "EUR"
}
```

**Ballerina Output (transform_message_with_when_otherwise_nested.bal):**
```ballerina
import ballerina/http;

listener http:Listener config = new (8081, {host: "0.0.0.0"});

service /foo on config {
    resource function get .() returns http:Response|error {
        return self._invokeEndPoint0_();
    }

    private function _invokeEndPoint0_() returns http:Response|error {
        http:Response _response_ = new;
        json _dwOutput_ = check _dwMethod0_(payload);
        _response_.setPayload(_dwOutput_);
        return _response_;
    }
}

function _dwMethod0_(json payload) returns json|error {
    json _var_0;
    if check payload.country == "USA" {
        _var_0 = {"currency": "USD"};
    } else if check payload.country == "UK" {
        _var_0 = {"currency": "GBP"};
    } else {
        _var_0 = {"currency": "EUR"};
    }
    return _var_0;
}

```

